# 싱글턴
싱글턴 패턴이란 **인스턴스가 오직 하나만 생성되도록 보장**하는 디자인 패턴이다. 싱글턴의 구현 방법중 가장 많이 선호하는 방식인 **즉시 초기화 방식**과 **열거타입**에 대해 알아보자.

## 🎯 핵심 개념
일반적인 생성자는 호출될 때마다 항상 **새로운 객체**를 생성한다. 이는 **하나의 객체만 요구**될 때 **리소스 낭비**를 발생시킬 수 있다. 이러한 문제를 해결하기 위해 생성자를 `private`으로 제한하고 **정적 메서드로 객체를 제공하는 방식**이 싱글턴 패턴이다.

## 💻 구현 방법
### 1. 즉시 초기화
```JAVA
public class Singleton {
    private static final Singleton instance = new Singleton();

    private Singleton(){}

    public static Singleton getInstance(){
        return instance;
    }
}
```
- `private static final Singleton instance = new Singleton();`
  - 클래스가 메모리에 로드되는 순간 즉시 인스턴스를 만들고 초기화한다.

- `private Singleton(){}`
  - `private`으로 외부에서의 객체 생성을 막는다.

- `public static Singleton getInstance(){
        return instance;
    }` 
  - 정적 메서드로 객체의 접근을 허용한다.

### 2. 열거타입

```JAVA
public enum Singleton {
    INSTANCE;
    
    public void doSomething() {
        // 구현
    }
}
```

- `INSTANCE;` 
  -  클래스 로딩 시점에 단 한 번 생성되는 `public static final` 필드이다.

- `public void doSomething()`
  - `doSomething()`은 `INSTANCE`라는 유일한 객체가 수행할 동작을 정의하는 메서드이다.

## ✅ 장점

- 하나의 인스턴스만 생성하기 때문에 메모리 효율성이 좋다.

- 어디서든 동일한 인스턴스에 접근 가능하다.

- 모든 클래스가 동일한 인스턴스를 공유하여 프로그램의 일관성 유지에 좋다.

## ❌ 단점
- Mock 객체 생성이 까다로워 테스트에 어려움이 있다.

- 여러 스레드가 동시에 접근할 때 객체가 두개 이상 생성될 수 있다.

- 상속이 어려워 확장성이 제한된다.

## 🔍 실제 사용 예시

싱글턴 패턴은 `데이터베이스 연결`, `스레드 풀`, `설정 관리자`처럼 **생성 비용이 비싸거나 메모리를 많이 차지**하거나, `로깅(logging)` 객체나 `캐시(cache)`처럼 여러 클래스에서 공통적으로 사용해야 하는 기능을 제공할 때 사용한다.

### 데이터 베이스 연결

```JAVA
public class DatabaseConnection {
    private static volatile DatabaseConnection instance;
    private Connection connection;
    
    private DatabaseConnection() {
        // DB 연결 초기화
    }
    
    public static DatabaseConnection getInstance() {
        if (instance == null) {
            synchronized (DatabaseConnection.class) {
                if (instance == null) {
                    instance = new DatabaseConnection();
                }
            }
        }
        return instance;
    }
    
    public Connection getConnection() {
        return connection;
    }
}
```

### 로거 클래스

```JAVA
public class Logger {
    private static final Logger instance = new Logger();
    
    private Logger() {}
    
    public static Logger getInstance() {
        return instance;
    }
    
    public void log(String message) {
        System.out.println("[LOG] " + message);
    }
}
```

## 마무리하며

싱글턴 패턴은 오직 하나의 인스턴스만 존재해야 할 때 유용하고 강력한 이점을 가져올 수 있다. 예를 들어, 시스템의 로그를 기록하거나 데이터베이스 연결 풀을 관리할 때 싱글턴 패턴을 효과적으로 활용할 수 있다.

하지만 싱글턴 패턴이 항상 최선의 선택은 아니다. 싱글턴을 남용할 경우 전역 상태를 만들어 의존성 주입을 힘들게 하고, 이는 곧 테스트하기 어려운 코드를 생성하는 원인이 된다.

싱글턴 패턴의 장단점을 명확히 이해하고, 적절한 사용 시기를 파악하여 올바르게 사용하는 습관을 들여 코드의 질을 높이는 습관을 가져야겠다.

